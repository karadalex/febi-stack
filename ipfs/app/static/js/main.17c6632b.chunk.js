(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1048:function(t,e,a){"use strict";a.r(e);var n=a(5),i=a.n(n),s=a(399),r=a.n(s),o=(a(406),a(34)),c=a(35),l=a(37),h=a(36),u=a(38),f=(a(408),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={fhirData:{}},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.FHIR.client({serviceUrl:"https://r2.smarthealthit.org",auth:{type:"none"}}).api.search({type:"Observation",query:{subject:"99912345"}}).then(function(e){console.log(e),t.setState({fhirData:e}),t.props.setFhirData(t.state.fhirData)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"fhir"},i.a.createElement("h2",null,"FHIR Data"),i.a.createElement("pre",null,JSON.stringify(this.state.fhirData,null,2)))}}]),e}(n.Component)),p=a(202),d=a.n(p),m=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){window.web3=new d.a(d.a.givenProvider||"ws://localhost:8546")}},{key:"render",value:function(){return i.a.createElement("div",{className:"fhir"},i.a.createElement("h2",null," Ethereum "))}}]),e}(n.Component),v=a(65),b=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={bdbTx:{},propsChangeStatus:0},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(t){var e=this;switch(this.state.propsChangeStatus){case 0:this.props.fhirData!==t.fhirData&&this.setState({propsChangeStatus:1}),this.props.ipfsFileHash!==t.ipfsFileHash&&this.setState({propsChangeStatus:2});break;case 1:this.props.fhirData!==t.fhirData&&this.setState({propsChangeStatus:1}),this.props.ipfsFileHash!==t.ipfsFileHash&&this.setState({propsChangeStatus:3});break;case 2:this.props.fhirData!==t.fhirData&&this.setState({propsChangeStatus:3}),this.props.ipfsFileHash!==t.ipfsFileHash&&this.setState({propsChangeStatus:2});break;case 3:var a=new v.Ed25519Keypair,n=v.Transaction.makeCreateTransaction({resourceType:this.props.fhirData.data.resourceType,id:this.props.fhirData.data.id,metadata:this.props.fhirData.config,ipfsFileHash:this.props.ipfsFileHash},{what:"FHIR BigchainDB transaction",created_at:Date.now(),updated_at:Date.now()},[v.Transaction.makeOutput(v.Transaction.makeEd25519Condition(a.publicKey))],a.publicKey),i=v.Transaction.signTransaction(n,a.privateKey);new v.Connection("https://test.bigchaindb.com/api/v1/").postTransactionCommit(i).then(function(t){console.log("Transaction",i.id,"accepted"),e.setState({bdbTx:i})}),this.setState({propsChangeStatus:0})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h2",null,"BigchainDB Transaction"),i.a.createElement("pre",null,JSON.stringify(this.state.bdbTx,null,2)))}}]),e}(n.Component),D=a(400),E=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).setFhirData=function(t){a.setState({fhirData:t})},a.setIpfsFileHash=function(t){a.setState({ipfsFileHash:t}),console.log(a.state.ipfsFileHash)},a.state={fhirData:{},bdbTx:{},ipfsFileHash:""},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"FHIR Frontend "),i.a.createElement(f,{setFhirData:this.setFhirData}),i.a.createElement("br",null),i.a.createElement(D.a,{fhirData:this.state.fhirData,setIpfsFileHash:this.setIpfsFileHash}),i.a.createElement("br",null),i.a.createElement(b,{fhirData:this.state.fhirData,ipfsFileHash:this.state.ipfsFileHash}),i.a.createElement("br",null),i.a.createElement(m,null))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},357:function(t,e){},400:function(t,e,a){"use strict";(function(t){var n=a(34),i=a(35),s=a(37),r=a(36),o=a(38),c=a(5),l=a.n(c),h=a(586)({host:"ipfs.infura.io",port:"5001",protocol:"https"}),u=function(e){function a(t){var e;return Object(n.a)(this,a),(e=Object(s.a)(this,Object(r.a)(a).call(this,t))).state={id:null,version:null,protocol_version:null,added_file_hash:null,added_file_contents:null},e}return Object(o.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;h.id(function(e,a){if(e)throw e;t.setState({id:a.id,version:a.agentVersion,protocol_version:a.protocolVersion})})}},{key:"componentDidUpdate",value:function(e){var a=this;if(this.props.fhirData!==e.fhirData){var n=JSON.stringify(this.props.fhirData);h.add([t.from(n)],function(t,e){if(t)throw t;var n=e[0].hash;a.setState({added_file_hash:n}),a.props.setIpfsFileHash(a.state.added_file_hash),h.cat(n,function(t,e){if(t)throw t;var n=e.toString("utf8");a.setState({added_file_contents:n})})})}}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"IPFS Files"),l.a.createElement("p",null,"File ID: ",l.a.createElement("strong",null,this.state.id)),l.a.createElement("p",null,"IPFS version: ",l.a.createElement("strong",null,this.state.version)),l.a.createElement("p",null,"IPFS protocol version: ",l.a.createElement("strong",null,this.state.protocol_version)),l.a.createElement("div",null,l.a.createElement("div",null,"File was added",l.a.createElement("br",null),this.state.added_file_hash),l.a.createElement("div",null,"Contents of file added: ",l.a.createElement("br",null),this.state.added_file_contents)))}}]),a}(c.Component);e.a=u}).call(this,a(0).Buffer)},401:function(t,e,a){t.exports=a(1048)},406:function(t,e,a){},408:function(t,e,a){},441:function(t,e){},443:function(t,e){},466:function(t,e){},509:function(t,e){},604:function(t,e){},606:function(t,e){},617:function(t,e){},619:function(t,e){},648:function(t,e){},649:function(t,e){},659:function(t,e){},661:function(t,e){},681:function(t,e){},683:function(t,e){},687:function(t,e){},841:function(t,e){},854:function(t,e){}},[[401,2,1]]]);
//# sourceMappingURL=main.17c6632b.chunk.js.map